import{A as x,B as w,Ca as Q,E as _,Ea as f,Fa as A,G as p,Ga as E,Ha as N,J as r,K as i,L as u,M as b,N as g,O as d,S as c,T as M,U as h,V as v,W as O,X as P,Y as y,Z as I,da as k,ga as S,na as q,pa as z,qa as F,s as l,t as m,ta as T,z as a}from"./chunk-QFNS5P4G.js";function j(o,t){if(o&1&&(r(0,"div",15)(1,"p"),c(2),i()()),o&2){let e=d(2);a(2),M(e.feedbackMessage)}}function D(o,t){if(o&1){let e=b();r(0,"div")(1,"h3"),c(2),i(),r(3,"button",16),g("click",function(){l(e);let s=d(2);return m(s.tryAgain())}),c(4,"Try Again"),i(),r(5,"button",16),g("click",function(){l(e);let s=d(2);return m(s.reviewAnswers())}),c(6,"Review Your Answers"),i()()}if(o&2){let e=d(2);a(2),v("You scored ",e.score,"/",e.questions.length,"")}}function L(o,t){if(o&1){let e=b();r(0,"div",3)(1,"div",4),u(2,"app-left-sidebar"),i(),r(3,"div",5)(4,"div",6)(5,"h2",7),c(6),i()(),r(7,"div",8)(8,"div",9)(9,"p"),c(10),i(),r(11,"label"),c(12," Your answer: "),r(13,"input",10),y("ngModelChange",function(s){l(e);let C=d();return P(C.userAnswer,s)||(C.userAnswer=s),m(s)}),g("keydown.enter",function(){l(e);let s=d();return m(s.submitAnswer())}),i()(),r(14,"button",11),g("click",function(){l(e);let s=d();return m(s.submitAnswer())}),c(15,"Submit"),i()()(),_(16,j,3,1,"div",12)(17,D,7,2,"div",1),i(),r(18,"div",13),u(19,"app-right-sidebar",14),i()()}if(o&2){let e=d();a(6),h(" FMC \u2013 Level ",e.level," "),a(4),h(" ",e.questions[e.currentQIndex]==null?null:e.questions[e.currentQIndex].question," "),a(3),O("ngModel",e.userAnswer),a(3),p("ngIf",e.feedbackMessage),a(),p("ngIf",e.isFinished),a(2),p("userName",e.userName)("score",e.score)("currentQIndex",e.currentQIndex)("totalQuestions",e.questions.length)("elapsedTime",e.elapsedTime)}}function R(o,t){o&1&&(r(0,"div")(1,"p"),c(2,"Loading questions..."),i()())}var V=class o{constructor(t,e){this.quizService=t;this.router=e}questions=[];currentQIndex=0;userAnswer="";feedbackMessage="";score=0;level=0;userName="";elapsedTime="0:00";timer;secondsElapsed=0;isFinished=!1;currentOperation="fmc";isEnterDisabled=!1;lastUserAnswer="";lastCorrectAnswer="";ngOnInit(){this.level=parseInt(localStorage.getItem("level")||"0",10),this.userName=localStorage.getItem("userName")||"Guest",localStorage.setItem("operation","fmc"),this.quizService.getFMCQuestions(this.level).subscribe({next:t=>{this.questions=t,this.startTimer()},error:t=>console.error("FMC fetch error:",t)})}submitAnswer(){let e=this.questions[this.currentQIndex]?.answer.trim(),n=this.userAnswer.trim();if(!n){alert("\u26A0\uFE0F Please enter your answer before submitting!");return}n===e?(this.score++,this.feedbackMessage="\u2705 Correct!"):this.feedbackMessage=`\u274C Incorrect! Correct answer: ${e}`,this.userAnswer="",setTimeout(()=>{this.feedbackMessage="",this.currentQIndex<this.questions.length-1?this.currentQIndex++:this.completeQuiz()},1e3)}completeQuiz(){clearInterval(this.timer),this.isFinished=!0,localStorage.setItem("score",this.score.toString()),localStorage.setItem("answers",JSON.stringify(this.questions.map(n=>n.answer))),localStorage.setItem("questions",JSON.stringify(this.questions)),localStorage.setItem("explanation",JSON.stringify(this.questions.map(n=>n.explanation)));let t=`${this.currentOperation}_progress`,e=parseInt(localStorage.getItem(t)||"0",10);this.score===this.questions.length&&this.level>=e&&localStorage.setItem(t,(this.level+1).toString()),setTimeout(()=>this.router.navigate(["/result"]),1e3)}startTimer(){this.timer=setInterval(()=>{this.secondsElapsed++;let t=Math.floor(this.secondsElapsed/60),e=this.secondsElapsed%60;this.elapsedTime=`${t}:${e<10?"0"+e:e}`},1e3)}finishQuiz(){clearInterval(this.timer),this.isFinished=!0,localStorage.setItem("score",this.score.toString())}tryAgain(){this.router.navigate(["/operation"])}reviewAnswers(){this.router.navigate(["/result"],{queryParams:{score:this.score,elapsedTime:this.elapsedTime}})}static \u0275fac=function(e){return new(e||o)(x(f),x(q))};static \u0275cmp=w({type:o,selectors:[["app-fmc"]],features:[I([f])],decls:4,vars:2,consts:[["class","quiz-wrapper",4,"ngIf"],[4,"ngIf"],[1,"footer",2,"margin","auto","padding","10px","width","100%"],[1,"quiz-wrapper"],[1,"left-sidebar"],[1,"quiz-main-card"],[1,"quiz-header"],[1,"quiz-title","fmc"],[1,"question-row"],[1,"question-container"],["type","text","placeholder","Type your answer",3,"ngModelChange","keydown.enter","ngModel"],[1,"submit-btn",3,"click"],["class","feedback",4,"ngIf"],[1,"right-sidebar"],[3,"userName","score","currentQIndex","totalQuestions","elapsedTime"],[1,"feedback"],[3,"click"]],template:function(e,n){e&1&&(_(0,L,20,10,"div",0)(1,R,3,0,"div",1),r(2,"div",2),u(3,"app-footer"),i()),e&2&&(p("ngIf",n.questions.length>0),a(),p("ngIf",n.questions.length===0))},dependencies:[S,k,Q,z,F,T,N,E,A],styles:[".quiz-title.fmc[_ngcontent-%COMP%]{color:#8a2be2;font-size:1.6rem;margin-bottom:20px;background-color:#f3d6ff;padding:.8rem;border-radius:10px;text-align:center}.question-container[_ngcontent-%COMP%]{font-size:1.2rem;background:#f3e9ff;padding:15px;border-radius:8px;box-shadow:0 0 5px #0000001a;margin-bottom:20px;width:100%}.answer-input[_ngcontent-%COMP%]{border:2px solid #b98eff;border-radius:5px;padding:5px 10px;margin-left:10px;font-size:1rem;width:100px}.submit-btn[_ngcontent-%COMP%]{background-color:#ba6dff;color:#fff;padding:6px 16px;margin-left:10px;border:none;border-radius:5px;cursor:pointer;font-weight:700}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#9d5ad6}.feedback[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#d63384;font-weight:700}.left-sidebar[_ngcontent-%COMP%]{width:200px;height:100%}.quiz-main-card[_ngcontent-%COMP%]{flex:1;max-width:650px;background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #f3d6ff}.right-sidebar[_ngcontent-%COMP%]{width:220px;background-color:#f7f7f7;padding:1rem;border-radius:12px;height:20%;box-shadow:0 2px 10px #0000001a}.feedback[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f1f1f1;border-radius:8px;font-size:1.1rem;color:#333}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;padding-top:10%}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;background-color:#2196f3;color:#fff;border-radius:6px;font-weight:700;cursor:pointer;transition:background-color .2s ease-in-out}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1976d2}.volume-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:1.2rem;cursor:pointer;margin-left:8px}.volume-btn[_ngcontent-%COMP%]:hover{color:#2196f3}.question-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.character-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:auto;cursor:pointer;filter:grayscale(50%);transition:filter .3s ease}.character-container[_ngcontent-%COMP%]   img.animate[_ngcontent-%COMP%]{filter:grayscale(0%);animation:_ngcontent-%COMP%_bounce .6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.lottie-anim[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:1rem}.quiz-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;gap:2rem;margin:2rem auto;font-family:Poppins,sans-serif;flex-wrap:wrap}.quiz-title[_ngcontent-%COMP%]{background:#ffe0e0;padding:1rem;border-radius:8px;text-align:center;font-weight:700;font-size:1.4rem;margin-bottom:1rem}.character-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-top:1rem}.question-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}.answer-input[_ngcontent-%COMP%]{border:2px solid #2196f3;border-radius:5px;padding:4px 8px;width:60px;font-size:1.2rem;margin-left:8px}.feedback[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border-radius:8px;font-size:1.1rem}.correct[_ngcontent-%COMP%]{color:green}.incorrect[_ngcontent-%COMP%]{color:red}.correct-answer[_ngcontent-%COMP%]{margin-top:.5rem;color:green;font-weight:500}.submit-btn[_ngcontent-%COMP%]{background-color:#73ad21;color:#fff;padding:.6rem 1.2rem;border:none;border-radius:6px;font-weight:700;cursor:pointer}.loading-text[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;font-size:1.2rem;color:#777}.rough-work-title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;margin-top:2rem;margin-bottom:.5rem;color:#333}.grid-rough-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:1.5rem}.grid-rough-area[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]{display:flex;gap:4px}.grid-rough-area[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]   .grid-cell[_ngcontent-%COMP%]{width:28px;height:28px;border:1px solid #ccc;background-color:#fff}.whiteboard-rough-area[_ngcontent-%COMP%]{margin-top:1rem}.whiteboard-rough-area[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.5rem;font-size:1rem;border:1px solid #bbb;border-radius:6px;background-color:#fefefe;resize:vertical}"]})};export{V as FMCComponent};
