import{$ as q,A as h,B as x,Ca as N,E as _,Ea as D,Fa as L,G as l,Ga as R,Ha as B,I as C,J as r,K as s,L as g,M as b,N as m,O as c,S as u,T as w,U as S,V as I,W as y,X as M,Y as k,aa as O,da as P,fa as z,ga as Q,na as A,pa as T,qa as E,s as d,t as p,ta as V,y as v,z as a}from"./chunk-QFNS5P4G.js";function H(n,t){if(n&1&&(r(0,"div",19)(1,"p",20),u(2),s()()),n&2){let e=c(2);a(2),w(e.feedbackMessage)}}function F(n,t){if(n&1){let e=b();r(0,"button",21),m("click",function(){d(e);let o=c(2);return p(o.submitAnswer())}),u(1,"Submit"),s()}}function U(n,t){if(n&1){let e=b();r(0,"button",22),m("click",function(){d(e);let o=c(2);return p(o.restartQuiz())}),u(1,"\u{1F501} Try Again"),s()}}function W(n,t){if(n&1){let e=b();r(0,"div",3)(1,"div",4),g(2,"app-left-sidebar"),s(),r(3,"div",5)(4,"div",6)(5,"h2",7),u(6),q(7,"titlecase"),s()(),r(8,"div",8)(9,"div",9),m("click",function(){d(e);let o=c();return p(o.readQuestionAloud())}),g(10,"img",10),s(),r(11,"div",11)(12,"p"),u(13),r(14,"input",12),k("ngModelChange",function(o){d(e);let f=c();return M(f.answerInput,o)||(f.answerInput=o),p(o)}),m("keyup.enter",function(){d(e);let o=c();return p(o.submitAnswer())}),s()()()(),_(15,H,3,1,"div",13),r(16,"div",14),_(17,F,2,0,"button",15)(18,U,2,0,"button",16),s()(),r(19,"div",17),g(20,"app-right-sidebar",18),s()()}if(n&2){let e=c();a(6),I(" ",O(7,14,e.currentOperation)," \u2013 ",e.currentOperation==="sudoku"?e.level===1?"Easy":e.level===2?"Medium":"Difficult":"Level "+e.level," "),a(4),C("animate",e.isReading),a(3),S(" ",e.questions[e.currentQIndex].question.split("=")[0]," = "),a(),y("ngModel",e.answerInput),a(),l("ngIf",e.feedbackMessage),a(2),l("ngIf",!e.quizCompleted),a(),l("ngIf",e.quizCompleted&&e.score<e.questions.length),a(2),l("userName",e.userName)("score",e.score)("currentQIndex",e.currentQIndex)("totalQuestions",e.questions.length)("elapsedTime",e.elapsedTime)}}function J(n,t){n&1&&(r(0,"div")(1,"p"),u(2,"Loading questions..."),s()())}var j=class n{constructor(t,e){this.quizService=t;this.router=e}questions=[];currentQIndex=0;answerInput="";feedbackMessage="";score=0;quizCompleted=!1;level=0;currentOperation="subtraction";userAnswers=[];userName="";elapsedTime="0:00";timer;secondsElapsed=0;animation;lastUserAnswer="";lastCorrectAnswer="";isCorrect=!0;ngOnInit(){this.level=parseInt(localStorage.getItem("level")||"0",10),this.userName=localStorage.getItem("userName")||"Guest",localStorage.setItem("operation","subtraction"),this.quizService.getSubtractionQuestions(this.level).subscribe({next:t=>{this.questions=t,this.userAnswers=new Array(t.length).fill(""),this.startTimer()},error:t=>console.error("\u274C Error loading subtraction questions:",t)})}startTimer(){this.timer=setInterval(()=>{this.secondsElapsed++;let t=Math.floor(this.secondsElapsed/60),e=this.secondsElapsed%60;this.elapsedTime=`${t}:${e<10?"0":""}${e}`},1e3)}handleEnter(t){this.submitAnswer()}submitAnswer(){let e=this.questions[this.currentQIndex].answer.trim(),i=this.answerInput.trim();this.lastUserAnswer=i,this.lastCorrectAnswer=e,this.isCorrect=i===e,this.isCorrect?(this.feedbackMessage="\u2705 Correct!",this.score++):this.feedbackMessage="\u274C Incorrect!",this.userAnswers[this.currentQIndex]=i,this.answerInput="",setTimeout(()=>{this.feedbackMessage=""},1500),this.currentQIndex<this.questions.length-1?this.currentQIndex++:this.completeQuiz()}completeQuiz(){this.quizCompleted=!0,localStorage.setItem("score",this.score.toString()),localStorage.setItem("answers",JSON.stringify(this.userAnswers)),localStorage.setItem("questions",JSON.stringify(this.questions));let t=`${this.currentOperation}_progress`,e=parseInt(localStorage.getItem(t)||"0",10);this.score===this.questions.length&&this.level>=e&&localStorage.setItem(t,(this.level+1).toString()),setTimeout(()=>this.router.navigate(["/result"]),1e3)}restartQuiz(){this.router.navigate(["/operation"])}handleLottie(t){this.animation=t}isReading=!1;readQuestionAloud(){let t=this.questions[this.currentQIndex]?.question;if(t&&"speechSynthesis"in window){let e=new SpeechSynthesisUtterance(t);window.speechSynthesis.cancel(),window.speechSynthesis.speak(e),this.animation?.play(),e.onend=()=>this.animation?.stop()}}static \u0275fac=function(e){return new(e||n)(h(D),h(A))};static \u0275cmp=x({type:n,selectors:[["app-subtraction"]],hostBindings:function(e,i){e&1&&m("keydown.enter",function(f){return i.handleEnter(f)},!1,v)},decls:4,vars:2,consts:[["class","quiz-wrapper",4,"ngIf"],[4,"ngIf"],[1,"footer",2,"margin","auto","padding","relative","width","5%0"],[1,"quiz-wrapper"],[1,"left-sidebar"],[1,"quiz-main-card"],[1,"quiz-header"],[1,"quiz-title","subtraction"],[1,"question-row"],[1,"character-container",3,"click"],["src","assets/images/bird1.png","alt","Bird Reader"],[1,"question-container"],["type","text","placeholder","",1,"answer-input",3,"ngModelChange","keyup.enter","ngModel"],["class","feedback",4,"ngIf"],[1,"button-group"],["style","background-color:#73AD21",3,"click",4,"ngIf"],["class","try-again",3,"click",4,"ngIf"],[1,"right-sidebar"],[3,"userName","score","currentQIndex","totalQuestions","elapsedTime"],[1,"feedback"],[2,"white-space","pre-line"],[2,"background-color","#73AD21",3,"click"],[1,"try-again",3,"click"]],template:function(e,i){e&1&&(_(0,W,21,16,"div",0)(1,J,3,0,"div",1),r(2,"div",2),g(3,"app-footer"),s()),e&2&&(l("ngIf",i.questions.length>0),a(),l("ngIf",i.questions.length===0))},dependencies:[Q,P,z,N,T,E,V,R,B,L],styles:[".quiz-main-card[_ngcontent-%COMP%]{flex:1;max-width:650px;background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0000001a}.feedback[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f1f1f1;border-radius:8px;font-size:1.1rem;color:#333}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;padding-top:10%}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;background-color:#2196f3;color:#fff;border-radius:6px;font-weight:700;cursor:pointer;transition:background-color .2s ease-in-out}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1976d2}.volume-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:1.2rem;cursor:pointer;margin-left:8px}.volume-btn[_ngcontent-%COMP%]:hover{color:#2196f3}.question-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.character-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:auto;cursor:pointer;filter:grayscale(50%);transition:filter .3s ease}.character-container[_ngcontent-%COMP%]   img.animate[_ngcontent-%COMP%]{filter:grayscale(0%);animation:_ngcontent-%COMP%_bounce .6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.lottie-anim[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:1rem}.answer-input[_ngcontent-%COMP%]{width:60px;border:2px solid #2196f3;border-radius:5px;padding:4px 8px;font-size:1.1rem;margin-left:8px}.feedback[_ngcontent-%COMP%]{margin-top:1rem;font-weight:700;font-size:1.2rem}.quiz-title.subtraction[_ngcontent-%COMP%]{background-color:#fea;padding:.8rem;border-radius:10px;text-align:center}.quiz-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;gap:2rem;margin:2rem auto;font-family:Poppins,sans-serif;flex-wrap:wrap}.left-sidebar[_ngcontent-%COMP%], .right-sidebar[_ngcontent-%COMP%]{width:220px}"]})};export{j as SubtractionComponent};
