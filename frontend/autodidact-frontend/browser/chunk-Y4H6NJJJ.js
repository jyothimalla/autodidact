import{A as _,B as v,Ca as D,E as f,Ea as Q,Fa as T,G as g,Ga as E,Ha as A,J as o,K as s,L as x,M as b,N as u,O as c,S as d,T as w,U as h,W as M,X as O,Y as P,da as y,ga as I,na as k,pa as z,qa as q,s as l,t as p,ta as S,y as C,z as a}from"./chunk-QFNS5P4G.js";function V(i,t){if(i&1&&(o(0,"div",14)(1,"p"),d(2),s()()),i&2){let e=c(2);a(2),w(e.feedbackMessage)}}function j(i,t){if(i&1){let e=b();o(0,"button",15),u("click",function(){l(e);let r=c(2);return p(r.restartQuiz())}),d(1,"\u{1F501} Try Again"),s()}}function B(i,t){if(i&1){let e=b();o(0,"div",1)(1,"div",2),x(2,"app-left-sidebar"),s(),o(3,"div",3)(4,"div",4)(5,"h2",5),d(6),s()(),o(7,"div",6)(8,"p"),d(9),o(10,"input",7),P("ngModelChange",function(r){l(e);let m=c();return O(m.answerInput,r)||(m.answerInput=r),p(r)}),u("keyup.enter",function(){l(e);let r=c();return p(r.submitAnswer())}),s()()(),f(11,V,3,1,"div",8),o(12,"div",9)(13,"button",10),u("click",function(){l(e);let r=c();return p(r.submitAnswer())}),d(14,"Submit"),s(),f(15,j,2,0,"button",11),s()(),o(16,"div",12),x(17,"app-right-sidebar",13),s()()}if(i&2){let e=c();a(6),h("Division \u2013 Level ",e.level,""),a(3),h(" ",e.questions[e.currentQIndex].question.split("=")[0]," = "),a(),M("ngModel",e.answerInput),a(),g("ngIf",e.feedbackMessage),a(4),g("ngIf",e.quizCompleted&&e.score<e.questions.length),a(2),g("userName",e.userName)("score",e.score)("currentQIndex",e.currentQIndex)("totalQuestions",e.questions.length)("elapsedTime",e.elapsedTime)}}var N=class i{constructor(t,e){this.quizService=t;this.router=e}questions=[];currentQIndex=0;answerInput="";feedbackMessage="";score=0;quizCompleted=!1;level=0;userName="";currentOperation="division";userAnswers=[];elapsedTime="0:00";timer;secondsElapsed=0;isCorrect=!0;lastCorrectAnswer="";ngOnInit(){this.level=parseInt(localStorage.getItem("level")||"0",10),this.userName=localStorage.getItem("userName")||"Guest",localStorage.setItem("operation",this.currentOperation),this.quizService.getDivisionQuestions(this.level).subscribe({next:t=>{this.questions=t,this.userAnswers=new Array(t.length).fill(""),this.startTimer()},error:t=>console.error("\u274C Error loading division questions:",t)})}startTimer(){this.timer=setInterval(()=>{this.secondsElapsed++;let t=Math.floor(this.secondsElapsed/60),e=this.secondsElapsed%60;this.elapsedTime=`${t}:${e<10?"0":""}${e}`},1e3)}handleEnter(t){this.submitAnswer()}submitAnswer(){let e=this.questions[this.currentQIndex].answer.trim(),n=this.answerInput.trim();if(!n){alert("\u26A0\uFE0F Please enter your answer before submitting!");return}this.isCorrect=n===e,this.lastCorrectAnswer=e,this.feedbackMessage=this.isCorrect?"\u2705 Correct!":`\u274C Incorrect! Correct is ${e}`,this.isCorrect&&this.score++,this.userAnswers[this.currentQIndex]=n,this.answerInput="",setTimeout(()=>this.feedbackMessage="",1500),this.currentQIndex<this.questions.length-1?this.currentQIndex++:this.finishQuiz()}finishQuiz(){this.quizCompleted=!0,localStorage.setItem("score",this.score.toString()),localStorage.setItem("answers",JSON.stringify(this.userAnswers)),localStorage.setItem("questions",JSON.stringify(this.questions));let t=`${this.currentOperation}_progress`,e=parseInt(localStorage.getItem(t)||"0",10);this.score===this.questions.length&&this.level>=e&&localStorage.setItem(t,(this.level+1).toString()),setTimeout(()=>this.router.navigate(["/result"]),1e3)}restartQuiz(){this.router.navigate(["/operation"])}static \u0275fac=function(e){return new(e||i)(_(Q),_(k))};static \u0275cmp=v({type:i,selectors:[["app-division"]],hostBindings:function(e,n){e&1&&u("keydown.enter",function(m){return n.handleEnter(m)},!1,C)},decls:2,vars:1,consts:[["class","quiz-wrapper",4,"ngIf"],[1,"quiz-wrapper"],[1,"left-sidebar"],[1,"quiz-main-card"],[1,"quiz-header"],[1,"quiz-title","division"],[1,"quiz-question"],["type","text",1,"answer-input",3,"ngModelChange","keyup.enter","ngModel"],["class","feedback",4,"ngIf"],[1,"button-group"],[3,"click"],["class","try-again",3,"click",4,"ngIf"],[1,"right-sidebar"],[3,"userName","score","currentQIndex","totalQuestions","elapsedTime"],[1,"feedback"],[1,"try-again",3,"click"]],template:function(e,n){e&1&&(f(0,B,18,10,"div",0),x(1,"app-footer")),e&2&&g("ngIf",n.questions.length>0)},dependencies:[I,y,D,z,q,S,E,A,T],styles:[".quiz-title.division[_ngcontent-%COMP%]{background-color:#d6eaff;padding:10px;border-radius:8px;text-align:center}.answer-input[_ngcontent-%COMP%]{border:2px solid #2196f3;border-radius:5px;padding:4px 8px;width:60px;font-size:1rem;margin-left:8px}.feedback[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem;background-color:#f9f9f9;border-left:4px solid #2196f3}.left-sidebar[_ngcontent-%COMP%]{width:200px;height:100%}.quiz-main-card[_ngcontent-%COMP%]{flex:1;max-width:650px;background-color:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0000001a}.right-sidebar[_ngcontent-%COMP%]{width:220px;background-color:#f7f7f7;padding:1rem;border-radius:12px;height:20%;box-shadow:0 2px 10px #0000001a}.feedback[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background-color:#f1f1f1;border-radius:8px;font-size:1.1rem;color:#333}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;padding-top:10%}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border:none;background-color:#2196f3;color:#fff;border-radius:6px;font-weight:700;cursor:pointer;transition:background-color .2s ease-in-out}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1976d2}.volume-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:1.2rem;cursor:pointer;margin-left:8px}.volume-btn[_ngcontent-%COMP%]:hover{color:#2196f3}.question-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.character-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:auto;cursor:pointer;filter:grayscale(50%);transition:filter .3s ease}.character-container[_ngcontent-%COMP%]   img.animate[_ngcontent-%COMP%]{filter:grayscale(0%);animation:_ngcontent-%COMP%_bounce .6s ease-in-out infinite}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(0)}to{transform:translateY(-10px)}}.lottie-anim[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-bottom:1rem}.answer-input[_ngcontent-%COMP%]{width:60px;border:2px solid #2196f3;border-radius:5px;padding:4px 8px;font-size:1.1rem;margin-left:8px}.feedback[_ngcontent-%COMP%]{margin-top:1rem;font-weight:700;font-size:1.2rem}.quiz-title.addition[_ngcontent-%COMP%]{background-color:#ffe0e0;padding:.8rem;border-radius:10px;text-align:center}.quiz-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;gap:2rem;margin:2rem auto;font-family:Poppins,sans-serif;flex-wrap:wrap}.quiz-title[_ngcontent-%COMP%]{background:#ffe0e0;padding:1rem;border-radius:8px;text-align:center;font-weight:700;font-size:1.4rem;margin-bottom:1rem}.character-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.correct-answer[_ngcontent-%COMP%]{color:green;margin-top:.5rem}.answer-input[_ngcontent-%COMP%]{width:80px;border:2px solid #2196f3;padding:5px;border-radius:6px}.submit-btn[_ngcontent-%COMP%]{background-color:#73ad21;padding:.6rem 1.2rem;color:#fff;border:none;border-radius:6px;font-weight:700;cursor:pointer}.character-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-top:1rem}.question-text[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500}.answer-input[_ngcontent-%COMP%]{border:2px solid #2196f3;border-radius:5px;padding:4px 8px;width:60px;font-size:1.2rem;margin-left:8px}.feedback[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border-radius:8px;font-size:1.1rem}.correct[_ngcontent-%COMP%]{color:green}.incorrect[_ngcontent-%COMP%]{color:red}.correct-answer[_ngcontent-%COMP%]{margin-top:.5rem;color:green;font-weight:500}.loading-text[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;font-size:1.2rem;color:#777}.rough-work-title[_ngcontent-%COMP%]{font-weight:700;font-size:1rem;margin-top:2rem;margin-bottom:.5rem;color:#333}.grid-rough-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:1.5rem}.grid-rough-area[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]{display:flex;gap:4px}.grid-rough-area[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]   .grid-cell[_ngcontent-%COMP%]{width:28px;height:28px;border:1px solid #ccc;background-color:#fff}.whiteboard-rough-area[_ngcontent-%COMP%]{margin-top:1rem}.whiteboard-rough-area[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.5rem;font-size:1rem;border:1px solid #bbb;border-radius:6px;background-color:#fefefe;resize:vertical}"]})};export{N as DivisionComponent};
